<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Singapore Pools 4D & Toto Prediction Dashboard - Statistical analysis and number generator for entertainment purposes only.">
    <meta name="keywords" content="Singapore Pools, 4D, Toto, Prediction, Analysis, Statistics, Lottery, SG Pools">
    <meta name="author" content="SG Pools Predictor">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://singaporepools.win/">
    <meta property="og:title" content="SG Pools Predictor | 4D & Toto Analysis Dashboard">
    <meta property="og:description" content="Statistical analysis of 3 years of Singapore Pools 4D & Toto data. Powered by probability, pattern recognition, and a touch of luck.">
    <meta property="og:image" content="https://singaporepools.win/assets/og-image.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://singaporepools.win/">
    <meta property="twitter:title" content="SG Pools Predictor | 4D & Toto Analysis Dashboard">
    <meta property="twitter:description" content="Statistical analysis of 3 years of Singapore Pools 4D & Toto data. Powered by probability, pattern recognition, and a touch of luck.">
    
    <title>SG Pools Predictor | 4D & Toto Analysis Dashboard</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Cabinet+Grotesk:wght@400;500;700;800&display=swap" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <div class="app">
        <!-- Header -->
        <header class="header">
            <div class="container header__inner">
                <div class="logo">
                    <span class="logo__icon">üé≤</span>
                    <span>SG Pools Predictor</span>
                </div>
                <nav class="nav">
                    <a href="#dashboard" class="nav__link nav__link--active" data-i18n="nav.dashboard">Home</a>
                    <a href="#analysis" class="nav__link" data-i18n="nav.analysis">Analysis</a>
                    <a href="#history" class="nav__link" data-i18n="nav.history">History</a>
                    <a href="#settings" class="nav__link" data-i18n="nav.settings">Settings</a>
                    <button onclick="App.toggleDonationModal()" class="nav__link nav__link--donate">
                        <span>‚òï</span> <span data-i18n="nav.donate">Donate</span>
                    </button>
                    
                    <!-- Language Selector -->
                    <div class="lang-select">
                        <button class="lang-btn active" onclick="App.setLanguage('en')">EN</button>
                        <button class="lang-btn" onclick="App.setLanguage('zh')">‰∏≠</button>
                        <button class="lang-btn" onclick="App.setLanguage('ms')">MS</button>
                        <button class="lang-btn" onclick="App.setLanguage('ta')">TA</button>
                    </div>
                </nav>
            </div>
        </header>



        <!-- Main Content -->
        <main class="main">
            <div class="container">
                <!-- Hero (always visible) -->
                <section class="hero">
                    <h1 class="hero__title" data-i18n="hero.title">
                        Predict Your <span class="hero__title-gradient">Lucky Numbers</span>
                    </h1>
                    <p class="hero__subtitle" data-i18n="hero.subtitle">
                        Statistical analysis of 3 years of Singapore Pools 4D & Toto data. 
                        Powered by probability, pattern recognition, and a touch of luck.
                    </p>
                    <span class="hero__disclaimer" data-i18n="hero.disclaimer">
                        ‚ö†Ô∏è FOR ENTERTAINMENT ONLY ‚Äî Lottery outcomes are random
                    </span>
                </section>

                <!-- Data Status (always visible) -->
                <div class="scrape-status" id="scrapeStatus">
                    <div class="scrape-status__indicator scrape-status__indicator--warning"></div>
                    <span class="scrape-status__text" data-i18n="status.notLoaded">Data not loaded. Run scrapers to populate database.</span>
                    <button class="scrape-status__action" onclick="loadData()" data-i18n="status.action">Load Data</button>
                </div>

                <!-- Stats Overview (always visible) -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-card__label" data-i18n="stats.4dDraws">4D Draws</span>
                        <div class="stat-card__value" id="stat4dDraws">-</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-card__label" data-i18n="stats.totoDraws">Toto Draws</span>
                        <div class="stat-card__value" id="statTotoDraws">-</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-card__label" data-i18n="stats.hotToto">Hottest Toto #</span>
                        <div class="stat-card__value" id="statHotNumber">-</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-card__label" data-i18n="stats.overdue">Most Overdue</span>
                        <div class="stat-card__value" id="statOverdue">-</div>
                    </div>
                </div>

                <!-- Game Selector (always visible) -->
                <div class="game-tabs">
                    <button class="game-tab game-tab--active" onclick="switchGame('toto')" data-game="toto" data-i18n="game.toto">
                        <span class="game-tab__icon">üé±</span> TOTO
                    </button>
                    <button class="game-tab" onclick="switchGame('4d')" data-game="4d" data-i18n="game.4d">
                        <span class="game-tab__icon">üé∞</span> 4D
                    </button>
                </div>

                <!-- VIEWS -->
                
                <!-- 1. DASHBOARD VIEW -->
                <div id="view-dashboard" class="view-content active">
                    <div class="dashboard">
                        <!-- Prediction Panel -->
                        <div class="card card--span-12">
                            <div class="card__header">
                                <h2 class="card__title" data-i18n="card.generator">
                                    <span class="card__icon">‚ú®</span>
                                    Number Generator
                                </h2>
                                <span class="card__badge" id="gameTypeLabel">TOTO</span>
                            </div>
                            <div class="card__body">
                                <div class="strategy-select" id="strategySelect">
                                    <button class="strategy-btn strategy-btn--active" data-strategy="weighted" data-i18n="strategy.weighted">Weighted</button>
                                    <button class="strategy-btn" data-strategy="hot" data-i18n="strategy.hot">Hot Numbers</button>
                                    <button class="strategy-btn" data-strategy="cold" data-i18n="strategy.cold">Cold Numbers</button>
                                    <button class="strategy-btn" data-strategy="overdue" data-i18n="strategy.overdue">Overdue</button>
                                    <button class="strategy-btn" data-strategy="balanced" data-i18n="strategy.balanced">Balanced</button>
                                    <button class="strategy-btn" data-strategy="random" data-i18n="strategy.random">Random</button>
                                    <button class="strategy-btn strategy-btn--ai" data-strategy="ai" onclick="generateAINumbers()" title="Powered by Gemini AI" data-i18n="strategy.ai">ü§ñ AI Prediction</button>
                                </div>
                                
                                <div class="lottery-balls mb-xl" id="predictedNumbers">
                                    <div class="lottery-ball">?</div>
                                    <div class="lottery-ball">?</div>
                                    <div class="lottery-ball">?</div>
                                    <div class="lottery-ball">?</div>
                                    <div class="lottery-ball">?</div>
                                    <div class="lottery-ball">?</div>
                                    <div class="lottery-ball lottery-ball--additional" id="additionalBall" style="display:none;">+</div>
                                </div>
                                
                                <button class="generate-btn" onclick="generateNumbers()">
                                    üéØ Generate Numbers
                                </button>
                                
                                <p class="mt-lg" style="text-align: center; color: var(--text-muted); font-size: 0.875rem;" id="strategyExplanation">
                                    Select a strategy and generate your lucky numbers
                                </p>
                                
                                <!-- Strategy Explanation Panel -->
                                <details class="strategy-details mt-lg">
                                    <summary class="strategy-details__toggle" data-i18n="details.title">
                                        üìñ How Each Strategy Works
                                    </summary>
                                    <div class="strategy-details__content">
                                        <div class="strategy-info">
                                            <div class="strategy-info__item">
                                                <span class="strategy-info__label" data-i18n="strategy.weighted">üìä Weighted</span>
                                                <span class="strategy-info__desc" data-i18n="details.weighted">Combines frequency + gap analysis. Hot numbers get √ó1.5 weight, cold get √ó0.7, overdue numbers get bonus based on gap length.</span>
                                            </div>
                                            <div class="strategy-info__item">
                                                <span class="strategy-info__label" data-i18n="strategy.hot">üî• Hot Numbers</span>
                                                <span class="strategy-info__desc" data-i18n="details.hot">Picks from the most frequently drawn numbers in historical data.</span>
                                            </div>
                                            <div class="strategy-info__item">
                                                <span class="strategy-info__label" data-i18n="strategy.cold">‚ùÑÔ∏è Cold Numbers</span>
                                                <span class="strategy-info__desc" data-i18n="details.cold">Picks from least frequent numbers ‚Äî theory: they're "due" for mean reversion.</span>
                                            </div>
                                            <div class="strategy-info__item">
                                                <span class="strategy-info__label" data-i18n="strategy.overdue">‚è∞ Overdue</span>
                                                <span class="strategy-info__desc" data-i18n="details.overdue">Selects numbers with the longest absence from draws.</span>
                                            </div>
                                            <div class="strategy-info__item">
                                                <span class="strategy-info__label" data-i18n="strategy.balanced">‚öñÔ∏è Balanced</span>
                                                <span class="strategy-info__desc" data-i18n="details.balanced">Hybrid mix: 2 hot + 2 overdue + 2 random for diversification.</span>
                                            </div>
                                            <div class="strategy-info__item">
                                                <span class="strategy-info__label" data-i18n="strategy.random">üé≤ Random</span>
                                                <span class="strategy-info__desc" data-i18n="details.random">Pure random selection with equal probability ‚Äî baseline comparison.</span>
                                            </div>
                                            <div class="strategy-info__item strategy-info__item--ai">
                                                <span class="strategy-info__label" data-i18n="strategy.ai">ü§ñ AI Prediction</span>
                                                <span class="strategy-info__desc" data-i18n="details.ai">Gemini 2.0 Flash analyzes 50 draws of historical data for patterns (frequency, gaps, consecutive runs) and generates predictions with confidence levels.</span>
                                            </div>
                                        </div>
                                    </div>
                                </details>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 2. ANALYSIS VIEW -->
                <div id="view-analysis" class="view-content" style="display: none;">
                    <div class="dashboard">
                        <!-- Frequency Heatmap -->
                        <div class="card card--span-12">
                            <div class="card__header">
                                <h2 class="card__title" data-i18n="card.heatmap">Frequency Heatmap</h2>
                                <div class="heatmap-legend">
                                    <span class="legend-item"><span class="dot dot--cold"></span> <span data-i18n="heatmap.cold">Cold</span></span>
                                    <span class="legend-item"><span class="dot dot--normal"></span> <span data-i18n="heatmap.normal">Normal</span></span>
                                    <span class="legend-item"><span class="dot dot--hot"></span> <span data-i18n="heatmap.hot">Hot</span></span>
                                </div>
                            </div>
                            <div class="card__body">
                                <div class="heatmap" id="heatmap"></div>
                            </div>
                        </div>

                        <!-- Overdue Numbers -->
                        <div class="card card--span-6">
                            <div class="card__header">
                                <h2 class="card__title" data-i18n="card.overdue">Overdue Numbers</h2>
                            </div>
                            <div class="card__body">
                                <div id="overdueList" style="font-family: var(--font-mono);">
                                    <div class="empty-state" data-i18n="overdue.empty">Load data to see overdue numbers</div>
                                </div>
                            </div>
                        </div>

                        <!-- Number Distribution -->
                        <div class="card card--span-6">
                            <div class="card__header">
                                <h2 class="card__title" data-i18n="card.distribution">Number Frequency Distribution</h2>
                            </div>
                            <div class="card__body">
                                <div class="chart-container">
                                    <canvas id="frequencyChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 3. HISTORY VIEW -->
                <div id="view-history" class="view-content" style="display: none;">
                    <div class="dashboard">
                        <div class="card card--span-12">
                            <div class="card__header">
                                <h2 class="card__title" data-i18n="card.history">Recent Draw History</h2>
                                <div class="badge" id="historyCount">0 draws</div>
                            </div>
                    <div class="table-container">
                        <table class="history-table" id="historyTable">
                            <thead>
                                <tr>
                                    <th data-i18n="table.draw">Draw</th>
                                    <th data-i18n="table.date">Date</th>
                                    <th data-i18n="table.numbers">Winning Numbers</th>
                                    <th data-i18n="table.additional">Additional</th>
                                </tr>
                            </thead>
                            <tbody id="historyBody">
                                <tr>
                                    <td colspan="4" class="text-center text-muted" data-i18n="table.empty">No data loaded. Run the scrapers first.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <!-- Pagination -->
                    <div class="pagination">
                        <button class="btn-pagination" id="prevPageBtn" onclick="App.prevPage()" disabled>‚ùÆ</button>
                        <span class="pagination-text"><span data-i18n="pagination.page">Page</span> <span id="currentPageNum">1</span></span>
                        <button class="btn-pagination" id="nextPageBtn" onclick="App.nextPage()" disabled>‚ùØ</button>
                    </div>
                        </div>
                    </div>
                </div>

                <!-- 4. SETTINGS VIEW -->
                <div id="view-settings" class="view-content" style="display: none;">
                    <div class="dashboard">
                        <div class="card card--span-12">
                            <div class="card__header">
                                <h2 class="card__title" data-i18n="nav.settings">Settings</h2>
                            </div>
                            <div class="card__body">
                                <p style="color: var(--text-muted); text-align: center; padding: 2rem;">
                                    üöÄ Coming Soon<br>
                                    <span style="font-size: 0.8rem">Theme customization & Notification alerts</span>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Footer -->
                <footer class="footer">
                    <p data-i18n="footer.disclaimer">This tool is for entertainment purposes only. Gambling involves risk. Please play responsibly.</p>
                    <p class="footer__credit">Built with ‚ù§Ô∏è for Singapore Pools enthusiasts</p>
                </footer>
            </div>
        </main>
    </div>

    <!-- Donation Modal -->
    <div id="donationModal" class="modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal__header">
                <h3 class="modal__title" data-i18n="modal.title">üçç Huat Ah! You Won?</h3>
                <button class="modal__close" onclick="App.toggleDonationModal()">√ó</button>
            </div>
            <div class="modal__body">
                <p class="modal__subtitle" data-i18n="modal.subtitle">Share the good luck! üßß</p>
                <p class="modal__text" data-i18n="modal.text">
                    Running this prediction engine costs money. If our AI helped you strike 4D or Toto, 
                    consider buying me a coffee (or a beer) to keep the servers running!
                </p>
                
                <div class="paynow-box">
                    <div class="paynow-qr">
                        <img src="assets/paynow-qr.png" alt="PayNow QR Code" draggable="false">
                    </div>
                    <div class="paynow-details">
                        <span class="paynow-label" data-i18n="paynow.label">PayNow to Mobile</span>
                        <div class="paynow-number" onclick="copyPayNow()" title="Click to copy">
                            9678 8675
                            <span class="copy-icon">üìã</span>
                        </div>
                        <p class="paynow-hint" id="copyAlert" data-i18n="paynow.copy">Click number to copy</p>
                    </div>
                </div>
            </div>
            <div class="modal__footer">
                <button class="btn-primary" onclick="App.toggleDonationModal()">OK, Huat!</button>
            </div>
        </div>
    </div>

    </div>

    <!-- Scripts -->
    <script src="scripts/translations.js"></script>
    <script src="scripts/api.js"></script>
    <script src="scripts/charts.js"></script>
    <script src="scripts/predictions.js"></script>
    <script src="scripts/main.js"></script>
</body>
</html>
